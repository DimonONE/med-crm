import{r as i,j as e,c as b}from"./index-f3fd4875.js";import{S as g}from"./close-gray-ico-0519171e.js";const y="_techInfo_1cx99_1",B="_info_1cx99_18",C="_value_1cx99_23",R="_editor_1cx99_26",T="_blockRow_1cx99_32",w="_addBlock_1cx99_57",A="_save_1cx99_70",s={techInfo:y,info:B,value:C,editor:R,blockRow:T,addBlock:w,save:A};function L({techInfo:m,className:h,isEditing:l=!1,onSaveInfo:d}){const{cardNumber:p,organizationName:x,dateOfAdmission:u,info:r,fullName:_}=m,[o,n]=i.useState([]);i.useEffect(()=>{if(l){const c=document.createElement("div");c.innerHTML=r||"";const t=Array.from(c.children).map(a=>a.outerHTML);n(t.length?t:["<p></p>"])}},[r,l]);const f=(c,t)=>{const a=[...o];a[c]=`<p>${t}</p>`,n(a)},j=()=>{n([...o,"<p></p>"])},v=c=>{const t=o.filter((a,k)=>k!==c);n(t)},N=()=>{const c=o.join("");d==null||d(c)};return e.jsxs("div",{className:b(s.techInfo,h),children:[e.jsxs("p",{className:s.info,children:["Приложение к амбулаторной карте:"," ",e.jsxs("span",{className:s.value,children:[p??"Номер карты",","," ",x??"Название организации"]})]}),e.jsxs("p",{className:s.info,children:["Дата приема:"," ",e.jsx("span",{className:s.value,children:u??"Число приема"})]}),e.jsxs("p",{className:s.info,children:["ФИО пациента:"," ",e.jsx("span",{className:s.value,children:_??"ФИО пациента"})]}),l?e.jsxs("div",{className:s.editor,children:[o.map((c,t)=>e.jsxs("div",{className:s.blockRow,children:[e.jsx("button",{type:"button",className:s.addBlock,onClick:j,children:"+"}),e.jsx("textarea",{value:c.replace(/^<p>|<\/p>$/g,""),onChange:a=>f(t,a.target.value)}),e.jsx("button",{type:"button",onClick:()=>o.length>1?v(t):void 0,children:e.jsx(g,{})})]},t)),e.jsx("button",{type:"button",className:s.save,onClick:N,children:"Сохранить"})]}):e.jsx("div",{dangerouslySetInnerHTML:{__html:r??""}})]})}export{L as T};
