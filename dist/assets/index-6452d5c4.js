import{P as d,d as P,u as j,a as I,r as a,j as r,B as L}from"./index-28b8728f.js";import{A as N}from"./index.esm-2e63961d.js";import{u as S}from"./patientsApi-6c556a01.js";import"./styles.module-4ec819d1.js";import"./index.esm-7458ef39.js";import"./styles.module-eea2a584.js";import"./styles.module-f9591ad8.js";import"./styles.module-8bcd8ee9.js";import"./utils-9d128c1d.js";/* empty css               */import"./styles.module-6fbcb23a.js";import{f as b,h as f,d as A}from"./helpers-96bd5b30.js";import"./styles.module-b235d918.js";import"./styles.module-6cec8057.js";import{S as R,a as v}from"./SidebarItemList-c6ab61ab.js";import{P as E,a as k}from"./PatientInfo-0a3a452d.js";import"./hooks-9171095e.js";import"./useBaseQuery-d5b5de49.js";import"./useQuery-5e80a04e.js";import"./useMutation-267c9319.js";import"./lodash-f37d900b.js";import"./Sidebar-c6cdc5c8.js";import"./index.es-b4da052e.js";import"./arrow-bottom-filter-ed2c8b82.js";import"./doctorApi-6ee17efe.js";import"./LoadImage-2fd8a1aa.js";import"./close-gray-ico-ce01fa8c.js";import"./FileLoader-a4bb3fb1.js";import"./Modal-25888893.js";import"./utils-045dd2ef.js";import"./servicesApi-3449a3d7.js";import"./Popper-0206d46a.js";function y({id:e,createdAt:i,fullName:t,dateOfBirth:n,status:s,phone:p}){return{id:e,createdAt:i,fullName:t,dateOfBirth:n,status:s,phone:p}}function B(e){return e!=null&&e.pages.length?e.pages.flatMap(i=>i.map(t=>y({id:t.id,createdAt:t.createdAt,fullName:t.fullName,dateOfBirth:t.dateOfBirth,status:t.status,phone:t.phone}))):[]}function M(e){return e!=null&&e.pages.length?e.pages.flatMap(i=>i.map(t=>({id:t.id,title:t.fullName,subTitle:`Код клиники: ${t.id}`,link:d.patients.details(t.id)}))):[]}P.locale("ru");function ct(){const e=j(),i=I(),[t,n]=a.useState(null),{data:s,fetchNextPage:p,updateQueryParameters:u,hasNextPage:h}=S(),l=a.useRef(null),m=a.useRef(null),x=a.useMemo(()=>M(s),[s]),g=a.useMemo(()=>B(s),[s]);return a.useEffect(()=>{const o=t?b(t):{};u({...o})},[t]),a.useEffect(()=>{f(l,m)()},[i]),r.jsxs("div",{children:[r.jsxs("div",{className:"d-flex",children:[r.jsx(R,{ref:l,items:x,selectId:i==null?void 0:i.patientId,onScroll:f(l,m),children:r.jsx(v,{isSearch:!0,filters:"Ф.И.О.",handleChange:o=>{n(c=>({...c,filter:o}))}})}),r.jsx("div",{children:i.patientId?r.jsx(E,{patientId:i.patientId}):r.jsx(k,{ref:m,patientList:g,hasNextPage:h,handleFetchNextPage:p,handleUpdateFilters:o=>{n(c=>({...c,...o}))},dataLength:A(s),onScroll:f(m,l)})})]}),r.jsxs(L,{className:"fixed-button",onClick:()=>e(d.patients.add),children:[r.jsx(N,{}),"Добавить пациента"]})]})}export{ct as default};
