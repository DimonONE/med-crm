import{h,r as c,j as e,S as f,B as j,Q as N}from"./index-8d56a7e0.js";import{a as y,b as g,E as s,F as a}from"./formik.esm-ad1947c7.js";import{c as v,a as n}from"./index.esm-1a25c3bb.js";import{d as w}from"./styles.module-0a1d6cce.js";import{e as b}from"./utils-045dd2ef.js";import"./styles.module-4a1edd24.js";/* empty css               */import{M as S}from"./Modal-d46436c9.js";import{s as F}from"./sessionApi-d313d1db.js";import{u as C}from"./useMutation-501ab2ae.js";import{C as q,T as E}from"./Container-a70157cb.js";import"./hooks-390b4af5.js";import"./useBaseQuery-1fd2ae80.js";import"./useQuery-47bca053.js";import"./styles.module-eea2a584.js";function M(){return C({mutationKey:F.mutation.create(),mutationFn:async l=>await h({url:"/users/create",method:"POST",data:l})})}function D(){const{data:l}=w(),{mutate:o}=M(),[d,m]=c.useState(!1),p=c.useMemo(()=>{const r={value:-1,label:"Выберите тип клиники"};if(l){const t=l.map(i=>({value:i.name,label:i.name}));return[r,...t]}return[r]},[l]),x=(r,{setSubmitting:t,resetForm:i})=>{o(r,{onSuccess:()=>{m(!0),i()},onError:u=>{N(b(u),{type:"error"})},onSettled:()=>{t(!1)}})};return e.jsx("div",{className:"auth-page",children:e.jsx(q,{children:e.jsxs(e.Fragment,{children:[e.jsx(E,{}),e.jsx(y,{initialValues:{email:"",fullName:"",password:"",address:"",country:"",description:"",name:"",phone:""},validationSchema:v().shape({fullName:n().min(3).required(),name:n().min(3).required(),email:n().email().required(),password:n().min(8).required(),phone:n().required()}),onSubmit:x,children:()=>e.jsxs(g,{className:"full-width center",children:[e.jsx("div",{className:"error-message",children:e.jsx(s,{name:"fullName"})}),e.jsx(a,{name:"fullName",className:"form-input",type:"text",placeholder:"Название клиники"}),e.jsx(a,{name:"type",className:"form-input",placeholder:"Тип клиники",children:r=>{var t;return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"error-message",children:(t=r.form.errors)==null?void 0:t.type}),e.jsx(f,{...r,className:"form-input",selectOptions:p})]})}}),e.jsxs("fieldset",{className:"full-width center",children:[e.jsx("div",{className:"error-message",children:e.jsx(s,{name:"address"})}),e.jsx(a,{name:"address",className:"form-input",type:"text",placeholder:"Адрес"})]}),e.jsxs("fieldset",{className:"full-width center",children:[e.jsx("div",{className:"error-message",children:e.jsx(s,{name:"country"})}),e.jsx(a,{name:"country",className:"form-input",type:"text",placeholder:"Страна"}),e.jsx(s,{name:"country"})]}),e.jsxs("fieldset",{className:"full-width center",children:[e.jsx("div",{className:"error-message",children:e.jsx(s,{name:"city"})}),e.jsx(a,{name:"city",className:"form-input form-input-text",type:"text",placeholder:"Город"})]}),e.jsxs("fieldset",{className:"full-width center",children:[e.jsx("div",{className:"error-message",children:e.jsx(s,{name:"phone"})}),e.jsx(a,{name:"phone",className:"form-input",type:"text",placeholder:"+7 (000) - 00 - 00"})]}),e.jsxs("fieldset",{className:"full-width center",children:[e.jsx("div",{className:"error-message",children:e.jsx(s,{name:"email"})}),e.jsx(a,{name:"email",className:"form-input",type:"text",placeholder:"Почта"})]}),e.jsxs("fieldset",{className:"full-width center",children:[e.jsx("div",{className:"error-message",children:e.jsx(s,{name:"password"})}),e.jsx(a,{name:"password",className:"form-input",type:"text",placeholder:"Пароль"})]}),e.jsxs("fieldset",{className:"full-width center",children:[e.jsx("div",{className:"error-message",children:e.jsx(s,{name:"name"})}),e.jsx(a,{name:"name",className:"form-input",type:"text",placeholder:"Имя главврача"})]}),e.jsxs("fieldset",{className:"full-width center",children:[e.jsx("div",{className:"form-textarea-label",children:"Краткое описание"}),e.jsx(a,{name:"description",className:"form-textarea",type:"text",placeholder:"Коментарий...",component:"textarea"}),e.jsx("div",{className:"error-message",children:e.jsx(s,{name:"description"})})]}),e.jsx(j,{className:"form-submit",type:"submit",color:"primary",children:"Подать заявку"})]})}),e.jsx(S,{isOpen:d,type:"info",onSuccess:()=>m(!1),onClose:()=>m(!1),children:e.jsxs("div",{children:["Спасибо за регистрацию! ",e.jsx("br",{}),"На вашу почту придет письмо, после подтверждения админа"]})})]})})})}export{D as default};
