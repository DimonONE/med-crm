import{j as e,d as u,B as h,c as f,Q as c,a as y}from"./index-47557d54.js";import{a as B,b}from"./formik.esm-89015e33.js";import{c as j,a as p}from"./index.esm-16d0899d.js";import{u as _}from"./sessionApi-12fe77ce.js";import{a as g,s as m,b as C}from"./styles.module-93422519.js";import{W as N,a as v}from"./WorkDay-96a8e17f.js";import{d as D,t as S}from"./times-728ce4fd.js";import{e as k}from"./utils-045dd2ef.js";import{B as w}from"./BackButton-b0d4b446.js";import{D as x}from"./DatePicker-7ad2b837.js";import"./useQuery-4996d838.js";import"./useBaseQuery-01eea3a2.js";import"./arrow-bottom-filter-7973e549.js";import"./hooks-3d3e7638.js";import"./useMutation-0530390b.js";import"./styles.module-49f2e5e5.js";import"./close-gray-ico-49cb4fac.js";import"./extendSxProp-3e7e7834.js";import"./styles.module-4a1edd24.js";/* empty css               */import"./Typography-1855dc05.js";function M({userId:r}){const{mutate:i}=g(),d=async(n,{setSubmitting:a})=>{try{await i(n,{onSuccess:()=>{c("Success!",{type:"success"})},onError:o=>{c(k(o),{type:"error"})}})}finally{a(!1)}};return e.jsx(B,{initialValues:{userId:r,startDate:"",endDate:""},validationSchema:j().shape({startDate:p().required(),endDate:p().required()}),onSubmit:d,children:({isSubmitting:n,setValues:a})=>e.jsx(b,{children:e.jsxs("div",{className:m.vacationTime,children:[e.jsx("div",{className:m.label,children:"Выберите отпуск"}),e.jsxs("div",{className:m.datePickerBlock,children:["От",e.jsx(x,{sx:{".MuiInputBase-root.MuiOutlinedInput-root":{width:"170px",height:"38px",padding:"0 14px",maxWidth:"none",background:"#FFF",borderRadius:"10.104px",border:"1.123px solid #A1B6C1",marginRight:"20px",fontSize:"18px",color:"#A1B6C1"},".MuiInputBase-root .MuiButtonBase-root.MuiIconButton-root":{color:"#A1B6C1"},".MuiButtonBase-root":{padding:0,paddingRight:"5px"}},onChange:o=>a(s=>({...s,startDate:u(o).toString()}))}),"До",e.jsx(x,{sx:{".MuiInputBase-root.MuiOutlinedInput-root":{width:"170px",height:"38px",padding:"0 14px",maxWidth:"none",background:"#FFF",borderRadius:"10.104px",border:"1.123px solid #A1B6C1",fontSize:"18px",color:"#A1B6C1"},".MuiInputBase-root .MuiButtonBase-root.MuiIconButton-root":{color:"#A1B6C1"},".MuiButtonBase-root":{padding:0,paddingRight:"5px"}},onChange:o=>a(s=>({...s,endDate:u(o).toString()}))}),e.jsxs(h,{className:f(m.submit,"form-submit"),type:"submit",color:"primary",children:["Сохранить ",n]})]})]})})})}const I="_root_14lu3_1",W="_formContainer_14lu3_5",F="_label_14lu3_14",T="_name_14lu3_22",A="_workDay_14lu3_23",R="_workTimeBlock_14lu3_24",H="_textHelper_14lu3_34",O="_submit_14lu3_42",t={root:I,formContainer:W,label:F,name:T,workDay:A,workTimeBlock:R,textHelper:H,submit:O};function ie(){const{userId:r}=y(),{data:i}=_(r),{mutate:d}=C(),n=async(a,{setSubmitting:o,resetForm:s})=>{try{await d(a,{onSuccess:()=>{c("Success!",{type:"success"}),s()},onError:l=>{c(k(l),{type:"error"})}})}finally{o(!1)}};return e.jsxs("div",{className:t.root,children:[e.jsx(w,{title:"Посещаемость, расписание"}),e.jsxs("div",{className:t.formContainer,children:[e.jsx(B,{initialValues:{userId:r,dayOfWeek:"Sunday",times:[]},validationSchema:j().shape({}),onSubmit:n,children:({isSubmitting:a,setValues:o})=>e.jsxs(b,{children:[e.jsx("div",{className:t.label,children:"Имя"}),e.jsx("div",{className:t.name,children:i==null?void 0:i.fullName}),e.jsx("div",{className:t.label,children:"Выберите дни работы"}),e.jsx(N,{daysWork:D,handleChange:s=>o(l=>({...l,dayOfWeek:u(s).format("dddd")})),className:t.workDay}),e.jsxs("div",{className:t.workTimeBlock,children:[e.jsx("div",{className:t.label,children:"Выберите время работы"}),e.jsx(v,{editTimes:!0,timesWork:S,handleChange:s=>o(l=>({...l,times:s})),handleDelete:()=>!1}),e.jsx("div",{className:t.textHelper,children:"*Перетащите мышкой от нужного до нужного времени или накликайте левой кнопкой мышки по часам работы сотрудника"}),e.jsxs(h,{className:f(t.submit,"form-submit"),type:"submit",color:"primary",children:["Сохранить ",a]})]})]})}),e.jsx(M,{userId:r})]})]})}export{ie as default};
