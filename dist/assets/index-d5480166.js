import{P as x,a as S,b as P,r as s,j as n}from"./index-47557d54.js";import{u as b,A as j}from"./styles.module-93422519.js";import{S as L,a as k}from"./SidebarItemList-cf354a19.js";import{f as A,h as d,d as I}from"./helpers-96bd5b30.js";import"./index.esm-16d0899d.js";/* empty css               */import"./arrow-bottom-filter-7973e549.js";import"./hooks-3d3e7638.js";import"./useBaseQuery-01eea3a2.js";import"./useMutation-0530390b.js";import"./styles.module-49f2e5e5.js";import"./times-728ce4fd.js";import"./extendSxProp-3e7e7834.js";import"./utils-045dd2ef.js";import"./Sidebar-dc976827.js";function v({userId:t,timeMonth:o,timeWeek:e,vacations:a,workTimes:r,visits:m}){return{userId:t,timeMonth:o,timeWeek:e,vacations:a,workTimes:r,visits:m}}function M(t){return t!=null&&t.pages.length?t.pages.flatMap(o=>o.map(e=>v({userId:e.doctor.id,timeMonth:e.totalMonth,timeWeek:e.totalWeek,vacations:e.doctor.vacations,workTimes:e.doctor.workTimes,visits:e.doctor.visits}))):[]}function N(t){return t!=null&&t.pages.length?t.pages.flatMap(o=>o.map(e=>({id:e.doctor.id,title:e.doctor.fullName,subTitle:e.doctor.specialization,link:x.personnel.details(e.doctor.id)}))):[]}function U(){const t=S(),[o]=P(),[e,a]=s.useState(null),{data:r,fetchNextPage:m,updateQueryParameters:p,hasNextPage:u}=b({fieldBySort:o.get("fieldBySort")}),c=s.useRef(null),l=s.useRef(null),h=s.useMemo(()=>N(r),[r]),g=s.useMemo(()=>M(r),[r]);return s.useEffect(()=>{const i=e?A(e):{};p({...i})},[e]),s.useEffect(()=>{d(c,l)()},[t]),n.jsxs("div",{className:"d-flex",children:[n.jsx(L,{ref:c,items:h,selectId:t==null?void 0:t.clinicId,onScroll:d(c,l),children:n.jsx(k,{isSearch:!0,filters:"Ф.И.О.",handleChange:i=>{a(f=>({...f,doctorName:i}))}})}),n.jsx("div",{children:n.jsx(j,{ref:l,personnelList:g,hasNextPage:u,handleFetchNextPage:m,handleUpdateFilters:i=>{a(f=>({...f,...i}))},dataLength:I(r),onScroll:d(l,c)})})]})}export{U as default};
