import{r as S,j as e,a0 as h,B as j,Q as o,c as d}from"./index-174441ce.js";import{e as v}from"./utils-045dd2ef.js";import{S as N}from"./close-gray-ico-ef1221c0.js";import{u as b,a as y,b as k}from"./servicesApi-841c6b14.js";import{u as B,s as _,a as r,d as E,b as t,c as F}from"./styles.module-6aeaaeeb.js";import{a as g,b as C,F as u}from"./formik.esm-6c75e105.js";import{c as L,a as x}from"./index.esm-62603d67.js";import{T as $}from"./TextField-e43ae6c0.js";import{B as q}from"./BackButton-2c2f05b3.js";import"./useQuery-b3e65d19.js";import"./useBaseQuery-ce99f95b.js";import"./useMutation-b7943c53.js";import"./styles.module-6cec8057.js";import"./styles.module-4a1edd24.js";function D(){const n=B(),{data:a,isLoading:s}=b(),{mutate:m}=y(),c=i=>{m(i,{onSuccess:async()=>{E(i),o("Success!",{type:"success"})},onError:l=>{o(v(l),{type:"error"})}})};return S.useEffect(()=>{a!==void 0&&_(a)},[a]),e.jsxs("div",{className:r.root,children:[e.jsx("div",{className:r.label,children:"Все услуги"}),s?e.jsx(h,{}):e.jsx("div",{className:r.servicesList,children:n.map(({id:i,price:l,name:f})=>e.jsxs("div",{className:r.servicesItem,children:[e.jsxs("span",{className:r.price,children:["₽ ",l]}),e.jsx("span",{className:r.info,children:f}),e.jsx(j,{color:"primary-reverse",onClick:()=>c(i),children:e.jsx(N,{})})]},i))})]})}function I(){const{mutate:n}=k(),a=async(s,{setSubmitting:m})=>{n({...s,price:Number(s.price)},{onSuccess:async c=>{F(c),o("Success!",{type:"success"})},onSettled:()=>{m(!1)},onError:c=>{o(v(c),{type:"error"})}})};return e.jsx(g,{initialValues:{price:0,name:""},validationSchema:L().shape({price:x().required(),name:x().required()}),onSubmit:a,children:()=>e.jsx(C,{children:e.jsxs("div",{className:t.addServices,children:[e.jsx("div",{className:t.label,children:"Добавить услуги"}),e.jsxs("div",{className:"d-flex",children:[e.jsx(u,{name:"price",children:s=>e.jsx($,{...s,className:d(t.servicesPrice,"form-input"),placeholder:"Цена ₽",type:"text"})}),e.jsx(u,{name:"name",className:d(t.servicesName,"form-input"),placeholder:"Название услуги"})]}),e.jsx(j,{className:d(t.adding,"form-submit"),type:"submit",color:"primary",children:"Добавить"})]})})})}const P="_root_jcpk8_1",T="_container_jcpk8_6",G="_backButton_jcpk8_11",p={root:P,container:T,backButton:G};function Y(){return e.jsxs("div",{className:p.root,children:[e.jsx(q,{title:"Услуги",className:p.backButton}),e.jsxs("div",{className:p.container,children:[e.jsx(I,{}),e.jsx(D,{})]})]})}export{Y as default};
