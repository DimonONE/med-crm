import{P as p,a as P,u as b,b as j,r as i,j as r,B as A}from"./index-3da5cc6b.js";import{A as k}from"./index.esm-3a18a895.js";import{u as v,A as L}from"./styles.module-b407f8c9.js";import{S as N,a as I}from"./SidebarItemList-e41b4ab3.js";import{f as M,h as f,d as y}from"./helpers-96bd5b30.js";import"./index.esm-91e1ce39.js";/* empty css               */import"./index.es-63cefb11.js";import"./hooks-b17a559b.js";import"./useBaseQuery-7fd443c2.js";import"./useMutation-39d089a9.js";import"./styles.module-7e3d06a8.js";import"./times-5a9271f1.js";import"./extendSxProp-e65c1ed2.js";import"./utils-045dd2ef.js";import"./arrow-bottom-filter-b1be4ce4.js";import"./lodash-38bb2507.js";import"./Sidebar-9d35167e.js";function E({userId:e,timeMonth:s,timeWeek:t,vacations:n,workTimes:c,visits:o}){return{userId:e,timeMonth:s,timeWeek:t,vacations:n,workTimes:c,visits:o}}function R(e){return e!=null&&e.pages.length?e.pages.flatMap(s=>s.map(t=>E({userId:t.doctor.id,timeMonth:t.totalMonth,timeWeek:t.totalWeek,vacations:t.doctor.vacations,workTimes:t.doctor.workTimes,visits:t.doctor.visits}))):[]}function T(e){return e!=null&&e.pages.length?e.pages.flatMap(s=>s.map(t=>({id:t.doctor.id,title:t.doctor.fullName,subTitle:t.doctor.specialization,link:p.personnel.details(t.doctor.id)}))):[]}function Y(){const e=P(),s=b(),[t]=j(),[n,c]=i.useState(null),{data:o,fetchNextPage:u,updateQueryParameters:h,hasNextPage:g}=v({fieldBySort:t.get("fieldBySort")}),l=i.useRef(null),m=i.useRef(null),x=i.useMemo(()=>T(o),[o]),S=i.useMemo(()=>R(o),[o]);return i.useEffect(()=>{const a=n?M(n):{};h({...a})},[n]),i.useEffect(()=>{f(l,m)()},[e]),r.jsxs("div",{className:"d-flex",children:[r.jsx(N,{ref:l,items:x,selectId:e==null?void 0:e.clinicId,onScroll:f(l,m),children:r.jsx(I,{isSearch:!0,filters:"Ф.И.О.",handleChange:a=>{c(d=>({...d,doctorName:a}))}})}),r.jsx("div",{children:r.jsx(L,{ref:m,personnelList:S,hasNextPage:g,handleFetchNextPage:u,handleUpdateFilters:a=>{c(d=>({...d,...a}))},dataLength:y(o),onScroll:f(m,l)})}),r.jsxs(A,{className:"fixed-button",onClick:()=>s(p.personnel.add),children:[r.jsx(k,{}),"Добавить персонал"]})]})}export{Y as default};
