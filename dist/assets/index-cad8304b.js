import{j as o,d as l,B as h,c as f,Q as d,a as _}from"./index-28b8728f.js";import{a as B,b}from"./formik.esm-0b43f7b1.js";import{c as j,a as p}from"./index.esm-7458ef39.js";import{u as y}from"./sessionApi-46741555.js";import{a as g,s as c,b as C}from"./styles.module-4af57399.js";import{W as N,a as v}from"./WorkDay-46b32312.js";import{d as D,t as S}from"./times-5f17a510.js";import{e as k}from"./utils-045dd2ef.js";import{B as w}from"./BackButton-03403362.js";import{D as x}from"./DatePicker-abb74157.js";import"./useQuery-5e80a04e.js";import"./useBaseQuery-d5b5de49.js";import"./index.es-b4da052e.js";import"./hooks-9171095e.js";import"./useMutation-267c9319.js";import"./styles.module-6fbcb23a.js";import"./arrow-bottom-filter-ed2c8b82.js";import"./close-gray-ico-ce01fa8c.js";import"./extendSxProp-3260528d.js";import"./styles.module-4a1edd24.js";/* empty css               */import"./Typography-37f7fd1d.js";import"./Popper-0206d46a.js";function M({userId:s}){const{mutate:i}=g(),u=async(n,{setSubmitting:a})=>{try{await i(n,{onSuccess:()=>{d("Success!",{type:"success"})},onError:e=>{d(k(e),{type:"error"})}})}finally{a(!1)}};return o.jsx(B,{initialValues:{userId:s,startDate:"",endDate:""},validationSchema:j().shape({startDate:p().required(),endDate:p().required()}),onSubmit:u,children:({isSubmitting:n,setValues:a})=>o.jsx(b,{children:o.jsxs("div",{className:c.vacationTime,children:[o.jsx("div",{className:c.label,children:"Выберите отпуск"}),o.jsxs("div",{className:c.datePickerBlock,children:["От",o.jsx(x,{sx:{".MuiInputBase-root.MuiOutlinedInput-root":{width:"170px",height:"38px",padding:"0 14px",maxWidth:"none",background:"#FFF",borderRadius:"10.104px",border:"1.123px solid #A1B6C1",marginRight:"20px",fontSize:"18px",color:"#A1B6C1"},".MuiInputBase-root .MuiButtonBase-root.MuiIconButton-root":{color:"#A1B6C1"},".MuiButtonBase-root":{padding:0,paddingRight:"5px"}},onChange:e=>a(r=>({...r,startDate:l(e).toString()}))}),"До",o.jsx(x,{sx:{".MuiInputBase-root.MuiOutlinedInput-root":{width:"170px",height:"38px",padding:"0 14px",maxWidth:"none",background:"#FFF",borderRadius:"10.104px",border:"1.123px solid #A1B6C1",fontSize:"18px",color:"#A1B6C1"},".MuiInputBase-root .MuiButtonBase-root.MuiIconButton-root":{color:"#A1B6C1"},".MuiButtonBase-root":{padding:0,paddingRight:"5px"}},onChange:e=>a(r=>({...r,endDate:l(e).toString()}))}),o.jsxs(h,{className:f(c.submit,"form-submit"),type:"submit",color:"primary",children:["Сохранить ",n]})]})]})})})}const I="_root_14lu3_1",W="_formContainer_14lu3_5",F="_label_14lu3_14",T="_name_14lu3_22",A="_workDay_14lu3_23",R="_workTimeBlock_14lu3_24",H="_textHelper_14lu3_34",O="_submit_14lu3_42",t={root:I,formContainer:W,label:F,name:T,workDay:A,workTimeBlock:R,textHelper:H,submit:O};l.locale("en");function mo(){const{userId:s}=_(),{data:i}=y(s),{mutate:u}=C(),n=async(a,{setSubmitting:e,resetForm:r})=>{try{await u(a,{onSuccess:()=>{d("Success!",{type:"success"}),r()},onError:m=>{d(k(m),{type:"error"})}})}finally{e(!1)}};return o.jsxs("div",{className:t.root,children:[o.jsx(w,{title:"Посещаемость, расписание"}),o.jsxs("div",{className:t.formContainer,children:[o.jsx(B,{initialValues:{userId:s,dayOfWeek:l().format("dddd"),times:[]},validationSchema:j().shape({}),onSubmit:n,children:({isSubmitting:a,setValues:e})=>o.jsxs(b,{children:[o.jsx("div",{className:t.label,children:"Имя"}),o.jsx("div",{className:t.name,children:i==null?void 0:i.fullName}),o.jsx("div",{className:t.label,children:"Выберите дни работы"}),o.jsx(N,{daysWork:D,handleChange:r=>{e(m=>({...m,dayOfWeek:l(r).format("dddd")}))},className:t.workDay}),o.jsxs("div",{className:t.workTimeBlock,children:[o.jsx("div",{className:t.label,children:"Выберите время работы"}),o.jsx(v,{editTimes:!0,timesWork:S,handleChange:r=>e(m=>({...m,times:r})),handleDelete:()=>!1}),o.jsx("div",{className:t.textHelper,children:"*Перетащите мышкой от нужного до нужного времени или накликайте левой кнопкой мышки по часам работы сотрудника"}),o.jsxs(h,{className:f(t.submit,"form-submit"),type:"submit",color:"primary",children:["Сохранить ",a]})]})]})}),o.jsx(M,{userId:s})]})]})}export{mo as default};
