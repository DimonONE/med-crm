import{Q as v,u as p}from"./useBaseQuery-020bfd66.js";import{b0 as l,b1 as b,b2 as m,b3 as y}from"./index-b7b75947.js";class M extends v{constructor(e,t){super(e,t)}bindMethods(){super.bindMethods(),this.fetchNextPage=this.fetchNextPage.bind(this),this.fetchPreviousPage=this.fetchPreviousPage.bind(this)}setOptions(e,t){super.setOptions({...e,behavior:l()},t)}getOptimisticResult(e){return e.behavior=l(),super.getOptimisticResult(e)}fetchNextPage({pageParam:e,...t}={}){return this.fetch({...t,meta:{fetchMore:{direction:"forward",pageParam:e}}})}fetchPreviousPage({pageParam:e,...t}={}){return this.fetch({...t,meta:{fetchMore:{direction:"backward",pageParam:e}}})}createResult(e,t){var s,n,c,u,f,a;const{state:r}=e,h=super.createResult(e,t),{isFetching:o,isRefetching:d}=h,g=o&&((s=r.fetchMeta)==null||(n=s.fetchMore)==null?void 0:n.direction)==="forward",P=o&&((c=r.fetchMeta)==null||(u=c.fetchMore)==null?void 0:u.direction)==="backward";return{...h,fetchNextPage:this.fetchNextPage,fetchPreviousPage:this.fetchPreviousPage,hasNextPage:b(t,(f=r.data)==null?void 0:f.pages),hasPreviousPage:m(t,(a=r.data)==null?void 0:a.pages),isFetchingNextPage:g,isFetchingPreviousPage:P,isRefetching:d&&!g&&!P}}}function x(i,e,t){const s=y(i,e,t);return p(s,M)}function $({queryKey:i,fetchPage:e,initialQuery:t}){let s={offset:1,limit:100,sortBy:"ASC",...t};const{data:n,refetch:c,...u}=x({queryKey:i,queryFn:({pageParam:a})=>e({...s,...a}),getNextPageParam:(a,r)=>{const h=r.reduce((o,d)=>o+d.length,0)||0;if(a.length!==0)return{offset:h+1}}});return{data:n,refetch:c,updateQueryParameters:async a=>{s={...s,...a},c({queryKey:[i,s]})},...u}}export{$ as u};
